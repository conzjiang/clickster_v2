<% action_url = user.persisted? ? update_user_url : users_url %>
<% button_text = user.persisted? ? "Update Profile" : "Create Profile!" %>

<%= render 'shared/errors' %>

<form action="<%= action_url %>" method="post">
  <%= form_auth %>

  <% if user.persisted? %>
    <input type="hidden" name="_method" value="put">
  <% end %>

  <label for="user_email">Email</label>
  <input id="user_email"
         type="email"
         name="user[email]"
         value="<%= @user.email %>">

  <label for="user_username">Username</label>
  <input id="user_username"
         type="text"
         name="user[username]"
         value="<%= @user.username %>">

  <label for="user_password">Password</label>
  <input id="user_password" type="password" name="user[password]">

  <button><%= button_text %></button>
</form>
